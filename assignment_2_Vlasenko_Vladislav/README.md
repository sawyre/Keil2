
# Задание 2 - Матричная клавиатура
# Срок сдачи: 25 марта 2018, 01:00

Правильную работу вашего проекта обязательно нужно продемонстрировать на практическом занятии.
Если вы выполняли задания на дополнительные баллы, **обязательно** поясните в отчете, что именно вы выполнили, какие граничные условия указали, нужно ли как-то активировать доп. задания и т.д.

# Как подключать клавиатуру

К микроконтроллеру подключается матричная клавиатура.

```
cтолбец 1-4-7-* (первый) - РC.1 
столбец 2-5-8-0 (второй) - РC.2 
столбец 3-6-9-# (третий) - РC.3  
```
```
cтрока 1-2-3 (первая)    - РA.1  
строка 4-5-6 (вторая)    - РA.2  
строка 7-8-9 (третья)    - РA.3  
строка *-0-# (четвертая) - РA.4
```

К выводу PB.10 подключается динамик.

![matrix_keyboard_scheme](.images/matrix_keyboard.png)


# Задание

При нажатой на клавише динамик должен издавать звук постоянной частоты. Когда ни одна клавиша не нажата, звука быть не должно.  
Для всех клавиш значение частоты звука должно быть разным в достаточной степени, чтобы это различал человеческий слух, но при этом не должно быть меньше 500 Гц и не должно быть больше 3 КГц.  
Потому что ниже 500 Гц на кефирном динамике звук похож на кряхтенье, а выше 3 КГц он слишком громкий и мерзкий и оскорбляет слух.
 
## Совет

Не делайте программу одним неразрывным комком кода в main'e; напишите функцию для сканирования клавиатуры и функцию для генерации звука. Их можно будет протестировать отдельно друг от друга, а для симулятора сканирование можно будет "подделать".

# Задания на дополнительные баллы:

1) +2 балла - Различать кратковременное и длительное нажатие на каждую клавишу; при этом максимальная длительность кратковременного нажатия должна задаваться в программе как параметр (в секундах). Соответственно, частота звука при кратковременном и длительном нажатии должна быть разной.

1) +2 балла - Различать одновременное нажатие на любые две клавиши; частота звука при одновременном нажатии на пару клавиш должна отличаться от частоты звука при одиночном нажатии на любую из клавиш.

1) +7 баллов - К тому же микроконтроллеру подключается светодиодная матрица (5 столбцов и 7 строк). Вместо того, чтобы генерировать звук при нажатии клавиш, отображайте номер клавиши на светодиодной матрице.  
Для того, чтобы светодиод на пересечении столбца и строки загорелся, необходимо подать высокий уровень на столбец и низкий уровень на строку.  
Чтобы изображение на матрице не мерцало, частота ее обновления должна быть не менее 200 Гц (т.е. все изображение должно перерисовываться не реже, чем 200 раз в секунду).

## Подключение светодиодной матрицы

Столбцы: 
 
1) PA.5
1) PA.6
1) PA.7
1) PA.8
1) PA.9

Строки:  

1) PB.9
1) PB.10
1) PB.11
1) PB.12
1) PB.13
1) PB.14
1) PB.15
 

![led_matrix_photo](.images/led_matrix_photo.png) 
![led_matrix_scheme](.images/led_matrix_scheme.png)
